var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(a,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function s(e){try{c(n["throw"](e))}catch(t){o(t)}}function c(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(r,s)}c((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(r=c.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(n){i=[6,n],o=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var a,o,r,s,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},BaseMovieClip=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.config=function(e,t,i){var n=RES.getRes(e),a=RES.getRes(t);this.mcDataFactory=new egret.MovieClipDataFactory(n,a),this.movieClipData=this.mcDataFactory.generateMovieClipData(i)},t.prototype.hide=function(){this.parent&&this.parent.removeChild(this)},t.prototype.destoryMe=function(){this.stop(),this.hide()},t}(egret.MovieClip);__reflect(BaseMovieClip.prototype,"BaseMovieClip");var ResourceProxyBase=function(e){function t(t){void 0===t&&(t="");var i=e.call(this,t)||this;return i._dataMap=new Array,i._proxyName="",i._proxyName=t,i}return __extends(t,e),t.prototype.getData=function(){var e=RES.getRes(this._proxyName);return e},t}(puremvc.Proxy);__reflect(ResourceProxyBase.prototype,"ResourceProxyBase",["puremvc.IProxy","puremvc.INotifier"]);var BaseMediator=function(e){function t(t,i){void 0===t&&(t=""),void 0===i&&(i=null);var n=e.call(this,t,i)||this;return n.isInitialized=!1,n.isPopUp=!1,n.ui=null,n.w=0,n.h=0,n.w=GameConfig.curWidth(),n.h=GameConfig.curHeight(),n}return __extends(t,e),t.prototype.showUI=function(e,t,i,n,a,o){void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=!1),this.ui=e,this.beforShow(),this.initUI(),this.initData(),PopUpManager.addPopUp(e,t,i,n,a,o)},t.prototype.beforShow=function(){},t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.closePanel=function(e){void 0===e&&(e=0),PopUpManager.removePopUp(this.ui,e),this.destroy()},t.prototype.destroy=function(){},t.prototype.getIsPopUp=function(){return this.isPopUp},t.prototype.getIsInit=function(){return this.isInitialized},t.prototype.getWidth=function(){return this.ui.width},t.prototype.getHeight=function(){return this.ui.height},t}(puremvc.Mediator);__reflect(BaseMediator.prototype,"BaseMediator",["puremvc.IMediator","puremvc.INotifier"]);var TemplateProxy=function(e){function t(){return e.call(this,t.NAME)||this}return __extends(t,e),t.prototype.getGameData=function(){return this.getData()},t.NAME="template",t}(ResourceProxyBase);__reflect(TemplateProxy.prototype,"TemplateProxy");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function a(e){t.call(n,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var WaitPanel=function(e){function t(t){void 0===t&&(t=1);var i=e.call(this)||this;return i.bg=new egret.Sprite,i.w=0,i.h=0,i.createView(),i}return __extends(t,e),t.prototype.createView=function(){this.w=egret.MainContext.instance.stage.stageWidth,this.h=egret.MainContext.instance.stage.stageHeight,this.bg.graphics.beginFill(0,.2),this.bg.graphics.drawRect(0,0,this.w,this.h),this.bg.graphics.endFill(),this.bg.width=this.w,this.bg.height=this.h,this.addChild(this.bg),this.touchEnabled=!0,this.waitImg=new egret.Bitmap,this.waitImg.texture=RES.getRes("loadingCircle_png"),this.addChild(this.waitImg),this.waitImg.x=this.w/2,this.waitImg.y=this.h/2,this.waitImg.anchorOffsetX=this.waitImg.width/2,this.waitImg.anchorOffsetY=this.waitImg.height/2,EffectUtils.rotationEffect(this.waitImg,1e3)},t}(egret.Sprite);__reflect(WaitPanel.prototype,"WaitPanel");var EButton=function(e){function t(t,i,n,a,o,r,s){void 0===n&&(n=null),void 0===a&&(a=""),void 0===o&&(o=30),void 0===r&&(r=1),void 0===s&&(s="assets");var c=e.call(this)||this;return c.assets=RES.getRes("assets"),c.isPlayCartoon=!1,c.cartoonType=1,c.param={context:null,data:null},c.param.context=t,c.init(i,n,a,o,r,s),c}return __extends(t,e),t.prototype.init=function(e,t,i,n,a,o){void 0===t&&(t=null),void 0===i&&(i=""),void 0===n&&(n=30),void 0===a&&(a=1),void 0===o&&(o="assets"),this.cartoonType=a,this.backFun=t,this.btnImg=new egret.Bitmap,null==o?this.btnImg.texture=RES.getRes(e):("assets"!=o&&(this.assets=RES.getRes(o)),this.btnImg.texture=this.assets.getTexture(e)),this.addChild(this.btnImg),""!=i&&(this.textField=new egret.TextField,this.addChild(this.textField),this.textField.size=n,this.textField.textAlign="center",this.textField.stroke=1,this.textField.strokeColor=0,this.textField.text=i,this.textField.width=this.btnImg.width,this.textField.x=this.btnImg.width/2-this.textField.width/2,this.textField.y=this.btnImg.height/2-this.textField.height/2),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onbuttonTouchTap,this)},t.prototype.onbuttonTouchTap=function(e){if(!this.isPlayCartoon){this.isPlayCartoon=!0;var t=function(){this.isPlayCartoon=!1},i=function(){1==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.elasticOut).call(t,this):2==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.backOut).call(t,this):3==this.cartoonType&&egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},100).call(t,this)};egret.Tween.get(this).to({scaleX:.5,scaleY:.5,x:this.x+this.btnImg.width/4,y:this.y+this.btnImg.height/4},100,egret.Ease.sineIn).call(i,this),egret.setTimeout(function(){null!=this.backFun&&this.backFun.apply(this.param.context,[this.param.data])},this,300)}},t.prototype.setBindData=function(e){this.param.data=e},t.prototype.getBindData=function(){return this.param.data},t.prototype.getBitmap=function(){return this.btnImg},t}(egret.DisplayObjectContainer);__reflect(EButton.prototype,"EButton");var ETextField=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setText=function(e){void 0===e&&(e="");var t=new egret.HtmlTextParser;this.textFlow=t.parser(e)},t}(egret.TextField);__reflect(ETextField.prototype,"ETextField");var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onImgClick,e),e}return __extends(i,t),i.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},i.prototype.onImgClick=function(){console.log("img click!!"+this.data.name),e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_QIANGHUA)},i.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){console.log(this.data,">>>>>>>>>>>>>>>>>>>>>>>>>>");var t=e.DataManager.getInstance().getDungeonForID(this.data.index);null!=t&&(this.imgHead.source=t.dungeonImg)},i}(eui.ItemRenderer);e.Item_DungeonList=t,__reflect(t.prototype,"game.Item_DungeonList")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.imgbg=new eui.Image,t.imgbg.width=720,t.imgbg.height=500,t.addChild(t.imgbg),t.imgHero=new eui.Image,t.imgHero.horizontalCenter=0,t.addChild(t.imgHero),t}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){1==this.data.index||3==this.data.index?(this.imgbg.source="follower_normal_1_png",this.imgHero.source="quan_jiang_nvzhu_png"):(this.imgbg.source="follower_normal_2_png",this.imgHero.source="quan_jiang_zhanghe_png")},t}(eui.ItemRenderer);e.Item_Hero=t,__reflect(t.prototype,"game.Item_Hero")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.imgHero=new eui.Image,t}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.ItemRenderer);e.Item_HeroList=t,__reflect(t.prototype,"game.Item_HeroList")}(game||(game={}));var game;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.ItemRenderer);e.Item_ItemList=t,__reflect(t.prototype,"game.Item_ItemList")}(game||(game={}));var GameConfig;!function(e){function t(){var e=window.navigator.userAgent.toLowerCase(),t=""+e.match(/MicroMessenger/i);return"null"==t?!1:"micromessenger"==t?!0:void 0}function i(){return document.body.clientHeight/document.body.clientWidth>1.32}function n(){var e=window.navigator.userAgent.toLowerCase();""+e.match(/MicroMessenger/i);return""+e.match(/windows nt/i)=="windows nt"?"windows":""+e.match(/iphone/i)=="iphone"?"ios":""+e.match(/android/i)=="android"?"android":""+e.match(/ipad/i)=="ipad"?"ipad":""+e.match(/linux/i)=="linux"?"linux":""+e.match(/mac/i)=="mac"?"mac":""+e.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")}function a(){var e=window.navigator.userAgent.toLowerCase();return""+e.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+e.match(/qzone/i)=="qzone"?"qzone":""+e.match(/weibo/i)=="weibo"?"weibo":""+e.match(/qq/i)=="qq"?"qq":""+e.match(/renren/i)=="renren"?"renren":""+e.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+e.match(/douban/i)=="douban"?"douban":"other"}function o(){return egret.MainContext.instance.stage}function r(){return egret.MainContext.instance.stage.stageWidth}function s(){return egret.MainContext.instance.stage.stageHeight}e.isOnLine=navigator.onLine,e.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},e.LabelFontSize={littleSize:12,middleSize:18,normalSize:24,bigSize:36},e.isWeiXin=t,e.isBigScreen=i,e.systemType=n,e.platformType=a,e.curStage=o,e.curWidth=r,e.curHeight=s}(GameConfig||(GameConfig={}));var GlobalData;!function(e){e.myName="dily"}(GlobalData||(GlobalData={}));var MainNotify=function(){function e(){}return e.OPEN_MAIN="MainNotify_OPEN_MAIN",e.CLOSE_MAIN="MainNotify_CLOSE_MAIN",e.OPEN_ROLE="MainNotify_OPEN_ROLE",e.CLOSE_ROLE="MainNotify_CLOSE_ROLE",e.OPEN_FUNCTION="MainNotify_OPEN_FUNCTION",e.CLOSE_FUNCTION="MainNotify_CLOSE_FUNCTION",e.OPEN_ACTIVITY="MainNotify_OPEN_ACTIVITY",e.CLOSE_ACTIVITY="MainNotify_CLOSE_ACTIVITY",e}();__reflect(MainNotify.prototype,"MainNotify");var PanelNotify=function(){function e(){}return e.OPEN_ROLE="PANELNOTIFY_OPEN_ROLE",e.CLOSE_ROLE="PANELNOTIFY_CLOSE_ROLE",e.OPEN_BACKPACK="PANELNOTIFY_OPEN_BACKPACK",e.CLOSE_BACKPACK="PANELNOTIFY_CLOSE_BACKPACK",e.OPEN_QIANGHUA="PANELNOTIFY_OPEN_QIANGHUA",e.CLOSE_QIANGHUA="PANELNOTIFY_QIANGHUA",e.OPEN_ZHAOXIAN="PANELNOTIFY_OPEN_ZHAOXIAN",e.CLOSE_ZHAOXIAN="PPANELNOTIFY_ZHAOXIAN",e.OPEN_EQUIPMENT="PANELNOTIFY_OPEN_EQUIPMENT",e.CLOSE_EQUIPMENT="PANELNOTIFY_CLOSE_EQUIPMENT",e.OPEN_CHUANGDANG="PANELNOTIFY_OPEN_CHUANGDANG",e.CLOSE_CHUANGDANG="PANELNOTIFY_CHUANGDANG",e.OPEN_SHOP="PANELNOTIFY_OPEN_SHOP",e.CLOSE_SHOP="PANELNOTIFY_CLOSE_SHOP",e.OPEN_MAP="PANELNOTIFY_OPEN_MAP",e.CLOSE_MAP="PANELNOTIFY_CLOSE_MAP",e.OPEN_BattleFinish="PANELNOTIFY_OPEN_BATTLEFINISH",e.CLOSE_BattleFinish="PANELNOTIFY_CLOSE_BATTLEFINISH",e}();__reflect(PanelNotify.prototype,"PanelNotify");var SceneNotify=function(){function e(){}return e.OPEN_HOME="SceneNotify_OPEN_HOME",e.CLOSE_HOME="SceneNotify_CLOSE_HOME",e.OPEN_BATTLE="SceneNotify_OPEN_BATTLE",e.CLOSE_BATTLE="SceneNotify_CLOSE_BATTLE",e}();__reflect(SceneNotify.prototype,"SceneNotify");var SysNotify=function(){function e(){}return e.CONNECT_SERVER_SUCCESS="CONNECT_SERVER_SUCCESS",e.SERVER_BACK_DATA="SERVER_BACK_DATA",e}();__reflect(SysNotify.prototype,"SysNotify");var UserInfoNotify=function(){function e(){}return e.UPDATE_DATA="UPDATE_DATA",e}();__reflect(UserInfoNotify.prototype,"UserInfoNotify");var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.getInstance=function(){return null==this.instance&&(this.instance=new i),this.instance},i.prototype.initializeController=function(){t.prototype.initializeController.call(this),this.registerCommand(i.STARTUP,e.StartupCommand)},i.prototype.startUp=function(e){this.sendNotification(i.STARTUP,e),this.removeCommand(i.STARTUP)},i.STARTUP="startup",i}(puremvc.Facade);e.AppFacade=t,__reflect(t.prototype,"game.AppFacade",["puremvc.IFacade","puremvc.INotifier"])}(game||(game={}));var AniManager=function(e){function t(){var t=e.call(this)||this;return dragonBones.addMovieGroup(RES.getRes("NewProject_ske_dbmv"),RES.getRes("NewProject_tex_png")),t.movie=dragonBones.buildMovie("stand"),t}return __extends(t,e),t.prototype.destoryMe=function(){this.movie.stop(),this.movie.dispose(),this.movie.parent&&this.movie.parent.removeChild(this.movie)},t}(egret.DisplayObjectContainer);__reflect(AniManager.prototype,"AniManager");var AniMC=function(e){function t(){var t=e.call(this)||this;return t.config("zhangheAtk_mc_json","zhangheAtk_tex_png","NewProject"),t}return __extends(t,e),t}(BaseMovieClip);__reflect(AniMC.prototype,"AniMC");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?n(a):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.execute=function(t){(new e.SceneManager).register(),(new e.MainManager).register(),(new e.Processor_100_1).register()},i}(puremvc.SimpleCommand);e.ControllerPrepCommand=t,__reflect(t.prototype,"game.ControllerPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.execute=function(e){this.facade.registerProxy(new TemplateProxy),this.facade.registerProxy(new GameProxy)},t}(puremvc.SimpleCommand);e.ModelPrepCommand=t,__reflect(t.prototype,"game.ModelPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.initializeMacroCommand=function(){this.addSubCommand(e.ControllerPrepCommand),this.addSubCommand(e.ModelPrepCommand),this.addSubCommand(e.ViewPrepCommand)},i}(puremvc.MacroCommand);e.StartupCommand=t,__reflect(t.prototype,"game.StartupCommand")}(game||(game={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.execute=function(t){GameLayerManager.gameLayer().panelLayer;this.facade.registerMediator(new e.RoleMediator),this.facade.registerMediator(new e.BackpackMediator),this.facade.registerMediator(new e.QianghuaMediator),this.facade.registerMediator(new e.ZhaoXianMediator),this.facade.registerMediator(new e.ChuangDangMediator),this.facade.registerMediator(new e.ShopMediator),this.facade.registerMediator(new e.MapMediator)},i}(puremvc.SimpleCommand);e.ViewPrepCommand=t,__reflect(t.prototype,"game.ViewPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.register=function(){this.facade.registerCommand("Processor_100_1",t)},t.prototype.execute=function(e){var t=e.getBody(),i=Global.getMessage("user_login"),n=i.decode(t.buffer);console.log("反序列化数据：",n),this.sendNotification(UserInfoNotify.UPDATE_DATA,n)},t.NAME="Processor_100_1",t}(puremvc.SimpleCommand);e.Processor_100_1=t,__reflect(t.prototype,"game.Processor_100_1",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var UserInfoRequest;!function(e){function t(e,t){var i=Global.getMessage("user_login"),n=new i({userId:e,userName:t}),a=n.toArrayBuffer();SocketManager.sendMessage(100,1,a)}e.sendUserInfo=t}(UserInfoRequest||(UserInfoRequest={}));var game;!function(e){var t=function(){function t(){this.dungeonList=[],this.dungeonLevelList=[]}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.InitTestData=function(){for(var t=1;10>t;t++){var i=new e.DungeonData;i.dungeonID=t,i.dungeonName="test"+t,i.dungeonType=1,i.dungeonImg="dungeon"+t+"_jpg",this.dungeonList.push(i)}},t.prototype.getDungeonForID=function(e){for(var t=0,i=this.dungeonList;t<i.length;t++){var n=i[t];if(n.dungeonID==e)return n}return null},t}();e.DataManager=t,__reflect(t.prototype,"game.DataManager")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e}();e.DungeonData=t,__reflect(t.prototype,"game.DungeonData")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e}();e.DungeonLevelData=t,__reflect(t.prototype,"game.DungeonLevelData")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e}();e.FormationData=t,__reflect(t.prototype,"game.FormationData")}(game||(game={}));var game;!function(e){var t;!function(e){e[e.move=0]="move",e[e.atk=1]="atk"}(t=e.BattleSingleType||(e.BattleSingleType={}));var i=function(){function e(){}return e}();e.BattleSingle=i,__reflect(i.prototype,"game.BattleSingle");var n=function(){function i(){this.battleSingleArray=[]}return i.getInstance=function(){return null==this.instance&&(this.instance=new i),this.instance},i.prototype.CreateBattle=function(){this.formation1=new e.Formation,this.formation2=new e.Formation,this.formation1.PlayerID=1,this.formation2.PlayerID=2,this.formation1.formation=[0,1,1,1,1,1],this.formation2.formation=[0,0,1,1,1,0],this.batData="1,8,0,1,0,100;9,1,0,1,0,100;2,8,0,1,0,100;8,1,0,1,0,100;"},i.prototype.PlayBattle=function(){var e=this;if(this.battleSingleArray.length>0){var i=this.battleSingleArray.pop();if(null!=i)switch(i.battleType){case t.move:egret.Tween.get(i.AtkObj).to({x:i.xPoint,y:i.yPoint},300).call(this.PlayBattle,this);break;case t.atk:i.AtkObj.addEventListener(egret.MovieClipEvent.COMPLETE,function(t){i.AtkObj.gotoAndPlay("stand",-1);var n=i.defObj.x+i.defObj.width/2,a=i.defObj.y-i.defObj.height;EffectUtils.showTips("1000",4,30,!1,n,a),e.PlayBattle()},this),i.AtkObj.gotoAndPlay("Atk",1)}}else EffectUtils.showTips("战斗结束",4,50,!1,GameConfig.curWidth()/2,GameConfig.curHeight()/2,this.BattleFinishCallBack)},i.prototype.BattleFinishCallBack=function(){e.AppFacade.getInstance().sendNotification(MainNotify.OPEN_MAIN),e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_HOME),e.AppFacade.getInstance().sendNotification(SceneNotify.CLOSE_BATTLE)},i}();e.BattleManager=n,__reflect(n.prototype,"game.BattleManager")}(game||(game={}));var game;!function(e){var t=function(){function e(){this.formation=[0,0,0,0,0,0]}return e}();e.Formation=t,__reflect(t.prototype,"game.Formation")}(game||(game={}));var P;!function(e){function t(){return game.AppFacade.getInstance().retrieveProxy(TemplateProxy.NAME)}function i(){return game.AppFacade.getInstance().retrieveProxy(GameProxy.NAME)}e.getTemplateDataProxy=t,e.getGameDataProxy=i}(P||(P={}));var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.addChild(GameLayerManager.gameLayer()),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=i.sent(),this.startAnimation(e),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return t=i.sent(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),e=new LoadingUI,GameLayerManager.gameLayer().addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("loading",1)];case 3:return i.sent(),[4,RES.loadGroup("preload",0,e)];case 4:return i.sent(),GameLayerManager.gameLayer().removeChild(e),[3,6];case 5:return t=i.sent(),console.error(t),[3,6];case 6:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,i){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){this.imgBG=new egret.Sprite;var e=this.createBitmapByName("PreLoadingBg_jpg");this.imgBG.addChild(e);var t=this.stage.stageWidth,i=this.stage.stageHeight;e.width=t,e.height=i;var n=new egret.Shape;n.graphics.beginFill(0,.5),n.graphics.drawRect(0,0,t,172),n.graphics.endFill(),n.y=33,this.imgBG.addChild(n);var a=this.createBitmapByName("mainBtn_png");this.imgBG.addChild(a),a.x=26,a.y=33;var o=new egret.Shape;o.graphics.lineStyle(2,16777215),o.graphics.moveTo(0,0),o.graphics.lineTo(0,117),o.graphics.endFill(),o.x=172,o.y=61,this.imgBG.addChild(o);var r=new egret.TextField;r.textColor=16777215,r.width=t-172,r.textAlign="center",r.text="Hello Egret",r.size=24,r.x=172,r.y=80,this.imgBG.addChild(r);var s=new egret.TextField;this.imgBG.addChild(s),s.alpha=0,s.width=t-172,s.textAlign=egret.HorizontalAlign.CENTER,s.size=24,s.textColor=16777215,s.x=172,s.y=135,this.textfield=s;var c=new eui.Button;c.label="Click!",c.horizontalCenter=0,c.verticalCenter=0,this.imgBG.addChild(c),GameLayerManager.gameLayer().addChild(this.imgBG),c.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.startAnimation=function(e){var t=this,i=new egret.HtmlTextParser,n=e.map(function(e){return i.parse(e)}),a=this.textfield,o=-1,r=function(){o++,o>=n.length&&(o=0);var e=n[o];a.textFlow=e;var i=egret.Tween.get(a);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(r,t)};r()},t.prototype.onButtonClick=function(e){game.AppFacade.getInstance().startUp(GameLayerManager.gameLayer()),game.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_HOME),game.AppFacade.getInstance().sendNotification(MainNotify.OPEN_MAIN),GameLayerManager.gameLayer().removeChild(this.imgBG)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var GameProxy=function(e){function t(){var i=e.call(this,t.NAME)||this;return i.vo=new GameVO,i}return __extends(t,e),t.prototype.getGameName=function(){return this.vo||(this.vo=new GameVO),this.vo.gameName},t.prototype.setGameName=function(e){this.vo||(this.vo=new GameVO),this.vo.gameName=e},t.NAME="GameProxy",t}(ResourceProxyBase);__reflect(GameProxy.prototype,"GameProxy");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var GameVO=function(){function e(){this.gameName="Eger pro"}return e}();__reflect(GameVO.prototype,"GameVO");var GameLayerManager=function(e){function t(){var t=e.call(this)||this;return t.sceneLayer=new eui.UILayer,t.mainLayer=new eui.UILayer,t.panelLayer=new eui.UILayer,t.effectLayer=new eui.UILayer,t.maskLayer=new eui.UILayer,t.loadLayer=new eui.UILayer,t.init(),t}return __extends(t,e),t.gameLayer=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){this.touchThrough=!0,this.sceneLayer.touchThrough=!0,this.mainLayer.touchThrough=!0,this.panelLayer.touchThrough=!0,this.effectLayer.touchThrough=!0,this.maskLayer.touchThrough=!0,this.loadLayer.touchThrough=!0,this.addChild(this.sceneLayer),this.addChild(this.mainLayer),this.addChild(this.panelLayer),this.addChild(this.effectLayer),this.addChild(this.maskLayer),this.addChild(this.loadLayer)},t}(eui.UILayer);__reflect(GameLayerManager.prototype,"GameLayerManager");var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.register=function(){this.facade.registerCommand(MainNotify.OPEN_MAIN,i),this.facade.registerCommand(MainNotify.CLOSE_MAIN,i)},i.prototype.execute=function(t){var i=(t.getBody(),GameLayerManager.gameLayer().mainLayer);switch(t.getName()){case MainNotify.OPEN_MAIN:null==GameLayerManager.gameLayer().mainUI&&(GameLayerManager.gameLayer().mainUI=new e.MainUI,i.addChild(GameLayerManager.gameLayer().mainUI));break;case MainNotify.CLOSE_MAIN:null!=GameLayerManager.gameLayer().mainUI&&(i.removeChild(GameLayerManager.gameLayer().mainUI),GameLayerManager.gameLayer().mainUI=null)}},i.NAME="MainManager",i}(puremvc.SimpleCommand);e.MainManager=t,__reflect(t.prototype,"game.MainManager",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.register=function(){this.facade.registerCommand(SceneNotify.OPEN_HOME,i),this.facade.registerCommand(SceneNotify.CLOSE_HOME,i),this.facade.registerCommand(SceneNotify.OPEN_BATTLE,i),this.facade.registerCommand(SceneNotify.CLOSE_BATTLE,i)},i.prototype.execute=function(t){var i=(t.getBody(),GameLayerManager.gameLayer().sceneLayer);switch(t.getName()){case SceneNotify.OPEN_HOME:null==GameLayerManager.gameLayer().homeCity&&(GameLayerManager.gameLayer().homeCity=new e.HomeCity,i.addChild(GameLayerManager.gameLayer().homeCity));break;case SceneNotify.CLOSE_HOME:null!=GameLayerManager.gameLayer().homeCity&&(i.removeChild(GameLayerManager.gameLayer().homeCity),GameLayerManager.gameLayer().homeCity=null);break;case SceneNotify.OPEN_BATTLE:null==GameLayerManager.gameLayer().battleScene&&(GameLayerManager.gameLayer().battleScene=new e.BattleScene,i.addChild(GameLayerManager.gameLayer().battleScene));break;case SceneNotify.CLOSE_BATTLE:null!=GameLayerManager.gameLayer().battleScene&&(i.removeChild(GameLayerManager.gameLayer().battleScene),GameLayerManager.gameLayer().battleScene=null)}},i.NAME="SceneManager",i}(puremvc.SimpleCommand);e.SceneManager=t,__reflect(t.prototype,"game.SceneManager",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/main/ActivityBarSkin.exml",t}return __extends(t,e),t}(eui.Component);e.ActivityBar=t,__reflect(t.prototype,"game.ActivityBar")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/main/FunctionBarSkin.exml",t}return __extends(t,e),t}(eui.Component);e.FunctionBar=t,__reflect(t.prototype,"game.FunctionBar")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var i=t.call(this)||this;i.isHide=!1,i.skinName="resource/eui_skins/main/MainUISkin.exml";var n=new egret.Shape;return n.graphics.beginFill(16711680),n.x=i.functionBar.x,n.y=i.functionBar.y,n.graphics.drawRect(0,0,i.functionBar.width,i.functionBar.height),n.graphics.endFill(),i.addChild(n),i.mainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onMainBtnClick,i),i.functionBar.mask=n,i.functionBar.roleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onRoleBtnClick,i),i.functionBar.backpackBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onBackpackBtnClick,i),i.functionBar.qianghuaBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onQianghuaBtnClick,i),i.functionBar.zhaoXianBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onZhaoXianBtnClick,i),i.functionBar.chuangDangBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onChuangDangBtnClick,i),i.functionBar.shopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onShopBtnClick,i),i.functionBar.mapBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onMapBtnClick,i),i.roleInfo.imgHead.source="head_lusu_png",e.DataManager.getInstance().InitTestData(),i}return __extends(i,t),i.prototype.onMainBtnClick=function(e){this.isHide?(this.isHide=!this.isHide,egret.Tween.get(this.functionBar).to({x:0},300,egret.Ease.backOut)):(this.isHide=!this.isHide,egret.Tween.get(this.functionBar).to({x:GameConfig.curWidth()},300,egret.Ease.backOut))},i.prototype.onRoleBtnClick=function(t){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_ROLE)},i.prototype.onBackpackBtnClick=function(t){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_BACKPACK)},i.prototype.onQianghuaBtnClick=function(t){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_QIANGHUA)},i.prototype.onZhaoXianBtnClick=function(t){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_ZHAOXIAN)},i.prototype.onChuangDangBtnClick=function(t){e.AppFacade.getInstance().sendNotification(MainNotify.CLOSE_MAIN),e.AppFacade.getInstance().sendNotification(SceneNotify.CLOSE_HOME),e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_BATTLE)},i.prototype.onShopBtnClick=function(t){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_SHOP)},i.prototype.onMapBtnClick=function(t){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_MAP)},i.prototype.onAct=function(t){e.AppFacade.getInstance().sendNotification(MainNotify.CLOSE_MAIN),e.AppFacade.getInstance().sendNotification(SceneNotify.CLOSE_HOME),e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_BATTLE)},i.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},i}(eui.Component);e.MainUI=t,__reflect(t.prototype,"game.MainUI")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/main/RoleInfoSkin.exml",t
}return __extends(t,e),t}(eui.Component);e.RoleInfo=t,__reflect(t.prototype,"game.RoleInfo")}(game||(game={}));var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var PopUpManager;!function(e){function t(e,t,i,n,a,o){if(void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=!1),!GameLayerManager.gameLayer().panelLayer.contains(e)){e.scaleX=1,e.scaleY=1,e.x=0,e.y=0,e.alpha=1,t&&(this.darkSprite=new egret.Sprite,this.darkSprite.graphics.clear(),this.darkSprite.graphics.beginFill(0,.3),this.darkSprite.graphics.drawRect(0,0,GameConfig.curWidth(),GameConfig.curHeight()),this.darkSprite.graphics.endFill(),this.darkSprite.width=GameConfig.curWidth(),this.darkSprite.height=GameConfig.curHeight(),GameLayerManager.gameLayer().panelLayer.contains(this.darkSprite)||GameLayerManager.gameLayer().panelLayer.addChild(this.darkSprite),this.darkSprite.touchEnabled=!0,egret.Tween.get(this.darkSprite).to({alpha:1},150),this.darkSprite.visible=!0),GameLayerManager.gameLayer().panelLayer.addChild(e),GameConfig.curPanel=e,0!=i?(e.x=GameConfig.curWidth()/2-i/2,e.y=GameConfig.curHeight()/2-n/2):(i=e.width,n=e.height);var r=GameConfig.curWidth()/2-i/2,s=GameConfig.curHeight()/2-n/2;switch(a){case 0:break;case 1:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+i/4,e.y=e.y+n/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-i/4,y:e.y-n/4},300,egret.Ease.backOut);break;case 2:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+i/4,e.y=e.y+n/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-i/4,y:e.y-n/4},600,egret.Ease.elasticOut);break;case 3:o?(e.x=-i,egret.Tween.get(e).to({x:r},500,egret.Ease.cubicOut)):(e.x=-i,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 4:o?(e.x=i,egret.Tween.get(e).to({x:r},500,egret.Ease.cubicOut)):(e.x=i,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 5:o?(e.y=-n,egret.Tween.get(e).to({y:s},500,egret.Ease.cubicOut)):(e.y=-n,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut));break;case 6:o?(e.y=GameConfig.curHeight(),egret.Tween.get(e).to({y:s},500,egret.Ease.cubicOut)):(e.y=n,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut))}}}function i(e,t){void 0===t&&(t=0);var i=function(){GameLayerManager.gameLayer().panelLayer.contains(this.darkSprite)&&GameLayerManager.gameLayer().panelLayer.removeChild(this.darkSprite)};switch(this.darkSprite&&egret.Tween.get(this.darkSprite).to({alpha:0},100).call(i,this),t){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var n=500;0==t&&(n=0),egret.setTimeout(function(){GameLayerManager.gameLayer().panelLayer.contains(e)&&GameLayerManager.gameLayer().panelLayer.removeChild(e)},this,n)}e.addPopUp=t,e.removePopUp=i}(PopUpManager||(PopUpManager={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null);var a=t.call(this,i.NAME,n)||this;return a.backpackPanel=new e.BackpackPanel,a}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[PanelNotify.OPEN_BACKPACK,PanelNotify.CLOSE_BACKPACK]},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_BACKPACK:this.showUI(this.backpackPanel,!1,0,0,1);break;case PanelNotify.CLOSE_BACKPACK:this.closePanel(1)}},i.prototype.initUI=function(){this.backpackPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this)},i.prototype.initData=function(){this.backpackPanel.initListData(1)},i.prototype.saveProxyButtonClick=function(e){},i.prototype.readProxyButtonClick=function(e){},i.prototype.closeButtonClick=function(e){this.closePanel(1)},i.NAME="BackpackMediator",i}(BaseMediator);e.BackpackMediator=t,__reflect(t.prototype,"game.BackpackMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null);var a=t.call(this,i.NAME,n)||this;return a.backpackPanel=new e.BattleFinishPanel,a}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[PanelNotify.OPEN_BattleFinish,PanelNotify.CLOSE_BattleFinish]},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_BattleFinish:this.showUI(this.backpackPanel,!1,0,0,1);break;case PanelNotify.CLOSE_BattleFinish:this.closePanel(1)}},i.prototype.initUI=function(){this.backpackPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this)},i.prototype.initData=function(){},i.prototype.closeButtonClick=function(e){this.closePanel(1)},i.NAME="BattleFinishMediator",i}(BaseMediator);e.BattleFinishMediator=t,__reflect(t.prototype,"game.BattleFinishMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null);var a=t.call(this,i.NAME,n)||this;return a.chuangDangPanel=new e.ChuangDangPanel,a}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[PanelNotify.OPEN_CHUANGDANG,PanelNotify.CLOSE_CHUANGDANG]},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_CHUANGDANG:this.showUI(this.chuangDangPanel,!1,0,0,Number(this.chuangDangPanel.input1.text));break;case PanelNotify.CLOSE_CHUANGDANG:this.closePanel(1)}},i.prototype.initUI=function(){this.chuangDangPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.chuangDangPanel.readExcel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.readExcelButtonClick,this)},i.prototype.initData=function(){},i.prototype.readExcelButtonClick=function(e){egret.setTimeout(function(){this.sendNotification(PanelNotify.OPEN_CHUANGDANG)},this,100),this.closePanel(0)},i.prototype.closeButtonClick=function(e){this.closePanel(1)},i.NAME="ChuangDangMediator",i}(BaseMediator);e.ChuangDangMediator=t,__reflect(t.prototype,"game.ChuangDangMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null);var a=t.call(this,i.NAME,n)||this;return a.mapPanel=new e.MapPanel,a}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[PanelNotify.OPEN_MAP,PanelNotify.CLOSE_MAP]},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_MAP:this.showUI(this.mapPanel,!1,0,0,5);break;case PanelNotify.CLOSE_MAP:this.closePanel(1)}},i.prototype.initUI=function(){this.mapPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.mapPanel.initListData(1)},i.prototype.btn1Click=function(e){EffectUtils.showTips("从下到上弹出",1)},i.prototype.btn2Click=function(e){EffectUtils.showTips("从左至右弹出",2)},i.prototype.btn3Click=function(e){EffectUtils.showTips("从右至左弹出",3)},i.prototype.btn4Click=function(e){EffectUtils.showTips("从中间弹出渐渐消失",4)},i.prototype.btn5Click=function(e){EffectUtils.showTips("从大变小",5)},i.prototype.btn6Click=function(e){EffectUtils.showTips("警告字体颜色",5,24,!0)},i.prototype.initData=function(){},i.prototype.readExcelButtonClick=function(e){},i.prototype.closeButtonClick=function(e){this.closePanel(1)},i.NAME="MapMediator",i}(BaseMediator);e.MapMediator=t,__reflect(t.prototype,"game.MapMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null);var a=t.call(this,i.NAME,n)||this;return a.qinghuaPanel=new e.QianghuaPanel,a}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[PanelNotify.OPEN_QIANGHUA,PanelNotify.CLOSE_QIANGHUA,SysNotify.CONNECT_SERVER_SUCCESS,UserInfoNotify.UPDATE_DATA]},i.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case PanelNotify.OPEN_QIANGHUA:this.showUI(this.qinghuaPanel,!1,0,0,3);break;case PanelNotify.CLOSE_QIANGHUA:this.closePanel(1);break;case SysNotify.CONNECT_SERVER_SUCCESS:this.qinghuaPanel.showText.text+="服务器连接成功...\n";break;case UserInfoNotify.UPDATE_DATA:this.qinghuaPanel.showText.text+="userId:"+t.getUserId()+"\nuserName:"+t.getUserName()}},i.prototype.initUI=function(){this.qinghuaPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this)},i.prototype.initData=function(){},i.prototype.connectServerButtonClick=function(e){SocketManager.connectServer("echo.websocket.org",80)},i.prototype.sendMsgButtonClick=function(e){UserInfoRequest.sendUserInfo(Number(this.qinghuaPanel.input1.text),this.qinghuaPanel.input2.text)},i.prototype.closeButtonClick=function(e){this.closePanel(1)},i.NAME="QianghuaMediator",i}(BaseMediator);e.QianghuaMediator=t,__reflect(t.prototype,"game.QianghuaMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null);var a=t.call(this,i.NAME,n)||this;return a.rolePanel=new e.RolePanel,a}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[PanelNotify.OPEN_ROLE,PanelNotify.CLOSE_ROLE]},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_ROLE:this.showUI(this.rolePanel,!1,0,0,4);break;case PanelNotify.CLOSE_ROLE:this.closePanel(1)}},i.prototype.initUI=function(){this.rolePanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this)},i.prototype.initData=function(){this.rolePanel.initData()},i.prototype.readExcelButtonClick=function(e){},i.prototype.closeButtonClick=function(e){this.closePanel(1)},i.NAME="RoleMediator",i}(BaseMediator);e.RoleMediator=t,__reflect(t.prototype,"game.RoleMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null);var a=t.call(this,i.NAME,n)||this;return a.shopPanel=new e.ShopPanel,a.isPlay1=!1,a.isPlay2=!1,a.isPlay3=!1,a.isPlay4=!1,a.isPlay5=!1,a.isPlay6=!1,a.isPlay7=!1,a.isPlay8=!1,a.isPlay9=!1,a.isPlay10=!1,a}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[PanelNotify.OPEN_SHOP,PanelNotify.CLOSE_SHOP]},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_SHOP:this.showUI(this.shopPanel,!1,0,0,6);break;case PanelNotify.CLOSE_SHOP:this.closePanel(1)}},i.prototype.initUI=function(){this.shopPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.shopPanel.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn1Click,this),this.shopPanel.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn2Click,this),this.shopPanel.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn3Click,this),this.shopPanel.btn4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn4Click,this),this.shopPanel.btn5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn5Click,this),this.shopPanel.btn6.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn6Click,this),this.shopPanel.btn7.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn7Click,this),this.shopPanel.btn8.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn8Click,this),this.shopPanel.btn9.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn9Click,this),this.shopPanel.btn10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn10Click,this)},i.prototype.initData=function(){},i.prototype.btn1Click=function(e){this.isPlay1?(EffectUtils.showTips("取消旋转特效",5),EffectUtils.removeRotationEffect(this.shopPanel.img1),this.isPlay1=!1):(EffectUtils.showTips("旋转特效",5),EffectUtils.rotationEffect(this.shopPanel.img1,1e3),this.isPlay1=!0)},i.prototype.btn2Click=function(e){this.isPlay2?(EffectUtils.showTips("取消中心旋转特效",5),EffectUtils.removeRotationEffect(this.shopPanel.img2),this.isPlay2=!1):(EffectUtils.showTips("中心旋转特效",5),EffectUtils.rotationEffect(this.shopPanel.img2,1e3),this.isPlay2=!0)},i.prototype.btn3Click=function(e){EffectUtils.showTips("闪烁特效",5),EffectUtils.blinkEffect(this.shopPanel.img3,1e3)},i.prototype.btn4Click=function(e){EffectUtils.showTips("抖动特效",5),EffectUtils.shakeObj(this.shopPanel.img4)},i.prototype.btn5Click=function(e){EffectUtils.showTips("按下弹大",5),EffectUtils.playEffect(this.shopPanel.img5,1)},i.prototype.btn6Click=function(e){EffectUtils.showTips("按下轻微弹大",5),EffectUtils.playEffect(this.shopPanel.img6,2)},i.prototype.btn7Click=function(e){EffectUtils.showTips("按下变小放开变大",5),EffectUtils.playEffect(this.shopPanel.img7,3)},i.prototype.btn8Click=function(e){this.isPlay8?EffectUtils.showTips("正在持续变大变小呢！",5):(this.isPlay8=!0,EffectUtils.showTips("持续变大变小",5),EffectUtils.playScaleEffect(this.shopPanel.img8))},i.prototype.btn9Click=function(e){this.isPlay9?EffectUtils.showTips("正在上下浮动呢！",5):(this.isPlay9=!0,EffectUtils.showTips("上下浮动特效",5),EffectUtils.flyObj(this.shopPanel.img9,1e3,15))},i.prototype.btn10Click=function(e){this.isPlay10?EffectUtils.showTips("正在摇头呢！",5):(this.isPlay10=!0,EffectUtils.showTips("摇头特效",5),EffectUtils.rockObj(this.shopPanel.img10,500))},i.prototype.closeButtonClick=function(e){this.closePanel(1)},i.NAME="ShopMediator",i}(BaseMediator);e.ShopMediator=t,__reflect(t.prototype,"game.ShopMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null);var a=t.call(this,i.NAME,n)||this;return a.zhaoXianPanel=new e.ZhaoXianPanel,a}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[PanelNotify.OPEN_ZHAOXIAN,PanelNotify.CLOSE_ZHAOXIAN]},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_ZHAOXIAN:this.showUI(this.zhaoXianPanel,!1,0,0,5);break;case PanelNotify.CLOSE_ZHAOXIAN:this.closePanel(1)}},i.prototype.initUI=function(){this.zhaoXianPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.menuBtn=new EButton(this,"yellowBtn_png",this.onMenuBtnTouchTap,"按钮特效1",30,1,null),this.menuBtn.x=-300,this.menuBtn.y=300,this.zhaoXianPanel.addChild(this.menuBtn),this.setBtn=new EButton(this,"yellowBtn_png",this.onSetBtnTouchTap,"按钮特效12",30,2,null),this.setBtn.x=-300,this.setBtn.y=400,this.zhaoXianPanel.addChild(this.setBtn),this.buttonBtn=new EButton(this,"yellowBtn_png",this.onButtonBtnTouchTap,"按钮特效3",30,3,null),this.buttonBtn.x=-300,this.buttonBtn.y=500,this.zhaoXianPanel.addChild(this.buttonBtn),this.initEffect()},i.prototype.initEffect=function(){egret.setTimeout(function(){egret.Tween.get(this.menuBtn).to({x:this.w/2-this.menuBtn.width/2},600,egret.Ease.backOut)},this,150),egret.setTimeout(function(){egret.Tween.get(this.setBtn).to({x:this.w/2-this.setBtn.width/2},600,egret.Ease.backOut)},this,300),egret.setTimeout(function(){egret.Tween.get(this.buttonBtn).to({x:this.w/2-this.buttonBtn.width/2},600,egret.Ease.backOut)},this,450)},i.prototype.onMenuBtnTouchTap=function(e){},i.prototype.onSetBtnTouchTap=function(e){},i.prototype.onButtonBtnTouchTap=function(e){},i.prototype.initData=function(){},i.prototype.closeButtonClick=function(e){this.closePanel(1)},i.NAME="ZhaoXianMediator",i}(BaseMediator);e.ZhaoXianMediator=t,__reflect(t.prototype,"game.ZhaoXianMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.list=null,e.skinName="resource/eui_skins/Panel_BagSkin.exml",e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.btnHero.addEventListener(egret.TouchEvent.TOUCH_TAP,e.OnBtnHeroClick,e),e.btnItem.addEventListener(egret.TouchEvent.TOUCH_TAP,e.OnBtnItemClick,e),e}return __extends(i,t),i.prototype.initListData=function(t){null==this.list&&(this.list=new eui.List),this.list.useVirtualLayout=!0,1==t?this.list.itemRenderer=e.Item_HeroList:2==t&&(this.list.itemRenderer=e.Item_ItemList);for(var i=[],n=1;10>n;n++)1==t?i.push({Item_HeroList:"item"+n}):2==t&&i.push({Item_ItemList:"item"+n});this.list.dataProvider=new eui.ArrayCollection(i),this.scroller.viewport=this.list},i.prototype.createChildren=function(){this.scroller.viewport.validateNow(),this.scroller.viewport.scrollV=0},i.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},i.prototype.OnBtnHeroClick=function(){this.initListData(1)},i.prototype.OnBtnItemClick=function(){this.initListData(2)},i.prototype.moveScroller=function(){var e=this.scroller;e.viewport.scrollV+=10,e.viewport.scrollV+e.height>=e.viewport.contentHeight&&console.log("滚动到底部了")},i.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},i}(eui.Component);e.BackpackPanel=t,__reflect(t.prototype,"game.BackpackPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/panel/BattleFinishPanel.exml",t.addEventListener(eui.UIEvent.COMPLETE,t.createCompleteEvent,t),t}return __extends(t,e),t.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.Component);e.BattleFinishPanel=t,__reflect(t.prototype,"game.BattleFinishPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/Panel_ChuangDangSkin.exml",t.addEventListener(eui.UIEvent.COMPLETE,t.createCompleteEvent,t),t}return __extends(t,e),t.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.ChuangDangPanel=t,__reflect(t.prototype,"game.ChuangDangPanel")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.list=null,e.skinName="resource/eui_skins/Panel_MapSkin.exml",e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.btnHero.addEventListener(egret.TouchEvent.TOUCH_TAP,e.OnBtnHeroClick,e),e.btnItem.addEventListener(egret.TouchEvent.TOUCH_TAP,e.OnBtnItemClick,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},i.prototype.createChildren=function(){this.scroller.viewport.validateNow(),this.scroller.viewport.scrollV=0},i.prototype.initListData=function(t){null==this.list&&(this.list=new eui.List),this.list.useVirtualLayout=!0,1==t?this.list.itemRenderer=e.Item_DungeonList:2==t&&(this.list.itemRenderer=e.Item_ItemList);for(var i=[],n=1;10>n;n++)i.push({name:"item"+n,index:n});this.list.dataProvider=new eui.ArrayCollection(i),this.scroller.viewport=this.list},i.prototype.OnBtnHeroClick=function(){this.initListData(1)},i.prototype.OnBtnItemClick=function(){this.initListData(2)},i.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},i}(eui.Component);e.MapPanel=t,__reflect(t.prototype,"game.MapPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/Panel_QianghuaSkin.exml",t.addEventListener(eui.UIEvent.COMPLETE,t.createCompleteEvent,t),t.groupMap.addEventListener(egret.TouchEvent.TOUCH_MOVE,t.onMove,t),t.groupMap.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onMoveBegin,t),t.groupMap.addEventListener(egret.TouchEvent.TOUCH_END,t.onMoveEnd,t),t}return __extends(t,e),t.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.onMove=function(e){var t=this.groupMap.height-this.stage.stageHeight;if(e.stageY-this.currentPointY>0){if(this.groupMap.y>=0)return void(this.groupMap.y=0)}else if(this.groupMap.y<=-t)return void(this.groupMap.y=-t);this.groupMap.y+=e.stageY-this.currentPointY,this.currentPointY=e.stageY,console.log("move")},t.prototype.onMoveBegin=function(e){this.currentPointY=e.$stageY,console.log("begin")},t.prototype.onMoveEnd=function(e){this.currentPointY=0,console.log("end")},t}(eui.Component);e.QianghuaPanel=t,__reflect(t.prototype,"game.QianghuaPanel")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.list=null,e.size=4,e.isMoving=!1,e.currentPage=0,e.skinName="resource/eui_skins/Panel_RoleSkin.exml",e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.scroller.throwSpeed=0,e.scroller.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onMoveBegin,e),e.scroller.addEventListener(eui.UIEvent.CHANGE_END,e.onMoveEnd,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},i.prototype.createChildren=function(){this.scroller.viewport.validateNow(),this.scroller.viewport.scrollV=0,this.scroller.horizontalScrollBar.visible=!1,this.scroller.verticalScrollBar.visible=!1},i.prototype.initData=function(){null==this.list&&(this.list=new eui.List),this.list.useVirtualLayout=!0,this.list.layout=new eui.HorizontalLayout,this.list.itemRenderer=e.Item_Hero;for(var t=[],i=0;i<this.size;i++)t.push({name:"item"+i,index:i});this.list.dataProvider=new eui.ArrayCollection(t),this.scroller.viewport=this.list},i.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},i.prototype.onMoveBegin=function(e){},i.prototype.onMove=function(e){console.log("move")},i.prototype.onMoveCancel=function(e){console.log("onMoveCancel")},i.prototype.onMoveEnd=function(e){this.getCurrentPage(),console.log("end")},i.prototype.getCurrentPage=function(){var e=this.scroller.viewport.scrollH%this.stage.stageWidth,t=this.scroller.viewport.scrollH/this.stage.stageWidth;t=Math.floor(t),e>this.stage.stageWidth/2&&t++,this.currentPage=t;var i=t*this.stage.stageWidth;this.MovePanel(i)},i.prototype.MovePanel=function(e){var t=this;this.isMoving||(this.isMoving=!0,console.log("move to "+e),egret.Tween.get(this.scroller.viewport,{loop:!1}).to({scrollH:e},200).call(function(){return t.MoveStatusChange()},this))},i.prototype.MoveStatusChange=function(){this.isMoving=!1},i}(eui.Component);e.RolePanel=t,__reflect(t.prototype,"game.RolePanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/Panel_ShopSkin.exml",t.addEventListener(eui.UIEvent.COMPLETE,t.createCompleteEvent,t),t}return __extends(t,e),t.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.ShopPanel=t,__reflect(t.prototype,"game.ShopPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/Panel_ZhaoXianSkin.exml",t.addEventListener(eui.UIEvent.COMPLETE,t.createCompleteEvent,t),t}return __extends(t,e),t.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.ZhaoXianPanel=t,__reflect(t.prototype,"game.ZhaoXianPanel")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.aniList=[],e.skinName="src/core/view/scene/BattleScene.exml",e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this),e.BattleManager.getInstance().CreateBattle();for(var i=1;6>=i;i++)if(e.BattleManager.getInstance().formation1.formation[i-1]>0){this.aniList[i-1]=new AniMC;var n=this.getChildByName("heroBg"+i);this.aniList[i-1].x=n.x-n.width/2,this.aniList[i-1].y=n.y+n.height/2,this.addChild(this.aniList[i-1]),this.aniList[i-1].gotoAndPlay("stand",-1)}for(var i=1;6>=i;i++)if(e.BattleManager.getInstance().formation2.formation[i-1]>0){var a=6+i-1;this.aniList[a]=new AniMC;var n=this.getChildByName("monsterBg"+i);this.aniList[a].x=n.x-n.width/2,this.aniList[a].y=n.y+n.height/2,this.addChild(this.aniList[a]),this.aniList[a].gotoAndPlay("stand",-1)}GameLayerManager.gameLayer().sceneLayer.addChild(this),this.PlayBattle()},i.prototype.PlayBattle=function(){for(var t=e.BattleManager.getInstance().batData.split(";"),i=0;i<t.length;i++)if(t.length>0){var n=t[i].split(",");if(n.length>=6){var a=Number(n[0]),o=Number(n[1]),r=(n[2],n[3]),s=(n[4],n[5]);console.log(a+"使用技能"+r+"攻击"+o+"收到伤害"+s);var c=this.aniList[a].x,l=this.aniList[a].y,h=new e.BattleSingle;h.battleType=e.BattleSingleType.move,h.AtkObj=this.aniList[a],h.xPoint=this.aniList[o].x-this.aniList[o].width,h.yPoint=this.aniList[o].y,e.BattleManager.getInstance().battleSingleArray.unshift(h);var u=new e.BattleSingle;u.battleType=e.BattleSingleType.atk,u.AtkObj=this.aniList[a],u.xPoint=0,u.yPoint=0,u.defObj=this.aniList[o],e.BattleManager.getInstance().battleSingleArray.unshift(u);var g=new e.BattleSingle;g.battleType=e.BattleSingleType.move,g.AtkObj=this.aniList[a],g.xPoint=c,g.yPoint=l,e.BattleManager.getInstance().battleSingleArray.unshift(g)}}e.BattleManager.getInstance().PlayBattle()},i.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},i}(eui.Component);e.BattleScene=t,__reflect(t.prototype,"game.BattleScene")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="src/core/view/scene/HomeCitySkin.exml",t.addEventListener(eui.UIEvent.COMPLETE,t.createCompleteEvent,t),t}return __extends(t,e),t.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this),GameLayerManager.gameLayer().sceneLayer.addChild(this)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.HomeCity=t,__reflect(t.prototype,"game.HomeCity")}(game||(game={}));var SocketManager;!function(e){function t(e,t){void 0===e&&(e=""),void 0===t&&(t=80),Global.showWaritPanel(),this.sock=new egret.WebSocket,this.sock.type="webSocketTypeBinary",this.sock.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.sock.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.sock.connect(e,t)}function i(){Global.hideWaritPanel(),game.AppFacade.getInstance().sendNotification(SysNotify.CONNECT_SERVER_SUCCESS)}function n(){Global.hideWaritPanel();var e=new egret.ByteArray;this.sock.readBytes(e);var t=e.readInt(),i=e.readShort(),n=new egret.ByteArray;e.readBytes(n),game.AppFacade.getInstance().sendNotification("Processor_"+t+"_"+i,n)}function a(e,t,i){Global.showWaritPanel();var n=new egret.ByteArray;n.writeInt(e),n.writeShort(t),n.writeBytes(new egret.ByteArray(i)),this.sock.writeBytes(n)}new egret.WebSocket;e.connectServer=t,e.onSocketOpen=i,e.onReceiveMessage=n,e.sendMessage=a}(SocketManager||(SocketManager={}));var EffectUtils;!function(e){function t(e,t){if(void 0===t&&(t=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[e.hashCode]){null!=this.rotationArr[e.hashCode]&&this.rotationArr[e.hashCode]||(this.rotationArr[e.hashCode]=!0);var i=function(){this.rotationArr[e.hashCode]&&null!=e&&(e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(i,this))};e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(i,this)}}function i(e){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[e.hashCode]=!1}function n(e,t){void 0===t&&(t=1e3),new BitmapBlink(e,t)}function a(e){var t=80,i=e.x;egret.Tween.get(e).to({x:e.x-10},t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},t)},this,2*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x-20},t)},this,3*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},t)},this,4*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:i},t)},this,5*t)}function o(e){void 0===e&&(e=1);var t=GameConfig.curPanel,i=40,n=t.x,a=t.y;1==e?(egret.Tween.get(t).to({x:t.x-10},i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},i)},this,2*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x-20},i)},this,3*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},i)},this,4*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:n},i)},this,5*i)):(egret.Tween.get(t).to({x:t.x-10,y:t.y},i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20,y:t.y},i)},this,2*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x,y:t.y+15},i)},this,3*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x,y:t.y-20},i)},this,4*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x,y:t.y+10},i)},this,5*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:n,y:a},i)},this,6*i))}function r(e,t,i,n,a,o,r){switch(void 0===e&&(e=""),void 0===t&&(t=1),void 0===i&&(i=24),void 0===n&&(n=!1),void 0===a&&(a=100),void 0===o&&(o=100),t){case 1:TipsUtils.showTipsDownToUp(e,n,i,a,o);break;case 2:TipsUtils.showTipsLeftOrRight(e,n,!0,i,a,o);break;case 3:TipsUtils.showTipsLeftOrRight(e,n,!1,i,a,o);break;case 4:TipsUtils.showTipsFromCenter(e,n,i,a,o,r);break;case 5:TipsUtils.showTipsBigToSmall(e,n,i,a,o)}}function s(e,t){if(void 0===t&&(t=1),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var i=function(){this.isPlayEffectPlay=!1},n=function(){1==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.elasticOut).call(i,this):2==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.backOut).call(i,this):3==t&&egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},100).call(i,this)};egret.Tween.get(e).to({scaleX:.5,scaleY:.5,x:e.x+e.width/4,y:e.y+e.height/4},100,egret.Ease.sineIn).call(n,this)}}function c(e){var t=function(){if(null!=e){var i=function(){e.scaleX=1,e.scaleY=1,egret.Tween.get(e).to({alpha:1},1e3).call(t,self)};e.alpha=1,egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(i,self)}};t()}function l(e,t,i){void 0===i&&(i=50);var n=function(){if(null!=e){var a=function(){egret.Tween.get(e).to({y:e.y-i},t).call(n,this)};egret.Tween.get(e).to({y:e.y+i},t).call(a,this)}};n()}function h(e,t,i){void 0===i&&(i=20);var n=function(){if(null!=e){var a=function(){egret.Tween.get(e).to({rotation:-i},t).call(n,this)};egret.Tween.get(e).to({rotation:i},t).call(a,this)}};n()}function u(e,t,i){void 0===t&&(t=""),void 0===i&&(i=200);for(var n=t.split(""),a=n.length,o=0;a>o;o++)egret.setTimeout(function(){e.appendText(n[Number(this)])},o,i*o)}e.rotationEffect=t,e.removeRotationEffect=i,e.blinkEffect=n,e.shakeObj=a,e.shakeScreen=o,e.showTips=r;e.playEffect=s,e.playScaleEffect=c,e.flyObj=l,e.rockObj=h,e.typerEffect=u}(EffectUtils||(EffectUtils={}));var Global;!function(e){function t(){e.waitPanel=new WaitPanel(1),GameLayerManager.gameLayer().maskLayer.removeChildren(),GameLayerManager.gameLayer().maskLayer.addChild(e.waitPanel)}function i(){null!=e.waitPanel&&GameLayerManager.gameLayer().maskLayer.contains(e.waitPanel)&&GameLayerManager.gameLayer().maskLayer.removeChild(e.waitPanel)}function n(e){var t=new egret.HtmlTextParser;return t.parser(e)}function a(t){return null==e.message&&(e.message=dcodeIO.ProtoBuf.loadProto(RES.getRes("template_proto"))),e.message.build(t)}function o(e){switch(e){case 0:return"零";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";case 7:return"七";case 8:return"八";case 9:return"九";default:console.log("default case")}}e.showWaritPanel=t,e.hideWaritPanel=i,e.getTextFlow=n,e.getMessage=a,e.getNumber=o}(Global||(Global={}));var NativeApi;!function(e){function t(e,t){egret.localStorage.setItem(e,t)}function i(e){return egret.localStorage.getItem(e)
}function n(e){egret.localStorage.removeItem(e)}function a(){egret.localStorage.clear()}function o(){}function r(){}function s(e){window.open("tel:"+e,"_self")}function c(e){window.open("sms:"+e,"_self")}function l(){return window.location.href}e.setLocalData=t,e.getLocalData=i,e.deleteLocalData=n,e.clearLocalData=a,e.getMic=o,e.getScreen=r,e.callPhone=s,e.sendMessage=c,e.getCurUrl=l}(NativeApi||(NativeApi={}));var RegUtils;!function(e){function t(e){var t=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return t.test(e)?!0:(alert("您输入的Email地址格式不正确！"),!1)}function i(e){if(o(e))return!1;var t=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return t.test(e)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}function n(e){var t="/^1[3|4|5|7|8][0-9]d{4,8}$/",i=new RegExp(t);return i.test(e)?!0:!1}function a(e){var t=/^[0][1-9]{2,3}-[0-9]{5,10}$/,i=/^[1-9]{1}[0-9]{5,8}$/,n="您输入的电话号码不正确!";return e.length>9?t.test(e)?!0:(alert(n),!1):i.test(e)?!0:(alert(n),!1)}function o(e){if(""==e)return!0;var t="^[ ]+$",i=new RegExp(t);return i.test(e)}function r(e){var t=/^[-]{0,1}[0-9]{1,}$/;return t.test(e)}function s(e){var t="^[0-9]+$",i=new RegExp(t);return-1!=e.search(i)?!0:!1}function c(e){var t="^[0-9]+[.][0-9]{0,3}$",i=new RegExp(t);return i.test(e)?!0:!1}function l(e,t){var i=" ",n=-1;if(0==t||1==t){for(;" "==i;)++n,i=e.substr(n,1);e=e.substring(n)}if(0==t||2==t){for(i=" ",n=e.length;" "==i;)--n,i=e.substr(n,1);e=e.substring(0,n+1)}return e}e.checkEmail=t,e.isIP=i,e.checkMobile=n,e.checkPhone=a,e.isNull=o,e.isInteger=r,e.isNumber=s,e.isMoney=c,e.cTrim=l}(RegUtils||(RegUtils={}));var TipsManager;!function(e){function t(e,t,i){void 0===t&&(t=""),void 0===i&&(i=0),null==this._dict&&(this._dict=[]),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showTips,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.removeTips,this),null==this._dict[e.hashCode]&&(this._dict[e.hashCode]=[],this._dict[e.hashCode].descStr=t,this._dict[e.hashCode].effectType=i)}function i(e){var t=e.currentTarget,i="",n=0;if(null==this._tips){null!=this._dict[t.hashCode]&&(i=this._dict[t.hashCode].descStr,n=this._dict[t.hashCode].effectType),this._tips=new TipsPanel(this._dict[t.hashCode].descStr),GameLayerManager.gameLayer().effectLayer.contains(this._tips)||GameLayerManager.gameLayer().effectLayer.addChild(this._tips);var a=t.parent.localToGlobal(t.x,t.y);switch(a.x=a.x+t.width/2,a.y=a.y-this._tips.getHeight(),a.x+this._tips.getWidth()>GameConfig.curWidth()?a.x=GameConfig.curWidth()-this._tips.getWidth():a.x<0&&(a.x=0),a.y+this._tips.getHeight()>GameConfig.curHeight()?a.y=GameConfig.curHeight()-this._tips.getHeight():a.y<0&&(a.y=0),this._tips.x=a.x,this._tips.y=a.y,n){case 0:this._tips.alpha=0,egret.Tween.get(this._tips).to({alpha:1},300);break;case 1:this._tips.alpha=0,this._tips.y+=this._tips.getHeight(),egret.Tween.get(this._tips).to({alpha:1,y:this._tips.y-this._tips.getHeight()},500,egret.Ease.backOut);break;case 2:this._tips.alpha=0,this._tips.x-=this._tips.getWidth(),egret.Tween.get(this._tips).to({alpha:1,x:this._tips.x+this._tips.getWidth()},500,egret.Ease.backOut);break;case 3:this._tips.alpha=0,this._tips.x+=this._tips.getWidth(),egret.Tween.get(this._tips).to({alpha:1,x:this._tips.x-this._tips.getWidth()},500,egret.Ease.backOut)}}}function n(e){e.currentTarget;if(null!=this._tips){var t=function(){GameLayerManager.gameLayer().effectLayer.contains(this._tips)&&(GameLayerManager.gameLayer().effectLayer.removeChild(this._tips),this._tips=null)};egret.Tween.get(this._tips).to({alpha:0},300).call(t,this)}}e.addTips=t,e.showTips=i,e.removeTips=n}(TipsManager||(TipsManager={}));var TipsPanel=function(e){function t(t){void 0===t&&(t="");var i=e.call(this)||this;return i.descStr="",i.descStr=t,i.initUI(),i}return __extends(t,e),t.prototype.initUI=function(){this.bg=new egret.Bitmap,this.bg.texture=RES.getRes("tipsBg_png"),this.addChild(this.bg),this.bg.touchEnabled=!0,this.descTF=new egret.TextField,this.addChild(this.descTF),this.descTF.textColor=0,this.descTF.size=20,this.descTF.x=5,this.descTF.textAlign="center",this.descTF.text=this.descStr;var e=new egret.Rectangle(5,5,5,5);this.bg.scale9Grid=e,this.bg.width=this.descTF.width+10,this.bg.height=3*this.descTF.height,this.descTF.y=this.bg.height/2-this.descTF.height/2+2},t.prototype.getHeight=function(){return this.bg.height},t.prototype.getWidth=function(){return this.bg.width},t}(eui.Component);__reflect(TipsPanel.prototype,"TipsPanel");var BitmapBlink=function(e){function t(t,i,n){void 0===n&&(n=!0);var a=e.call(this)||this;return a._target=t,a._time=i,n&&a.start(),a}return __extends(t,e),t.prototype.start=function(){this._currTime=egret.getTimer(),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this)},t.prototype.runDown=function(e){this._target.alpha-=.045,this.checkOver()||this._target.alpha<=.6&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runUp,this))},t.prototype.runUp=function(e){this._target.alpha+=.045,this.checkOver()||this._target.alpha>=1&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this))},t.prototype.checkOver=function(){var e=egret.getTimer();return e-this._currTime>=this._time?(this.destroy(),!0):!1},t.prototype.destroy=function(){this._target.alpha=1,this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,this._target),this._target=null},t}(egret.EventDispatcher);__reflect(BitmapBlink.prototype,"BitmapBlink");var TipsUtils;!function(e){function t(e,t,i,n,a){void 0===e&&(e=""),void 0===t&&(t=!1),void 0===i&&(i=24);var o=new egret.TextField;o.size=i,o.y=GameConfig.curHeight()/2,t?o.textColor=GameConfig.TextColors.red:o.textColor=GameConfig.TextColors.green,o.alpha=0,o.text=e,o.strokeColor=0,o.x=GameConfig.curWidth()/2-o.width/2,o.stroke=2,o.bold=!0,o.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(o)||GameLayerManager.gameLayer().effectLayer.addChild(o);var r=function(){GameLayerManager.gameLayer().effectLayer.contains(o)&&(GameLayerManager.gameLayer().effectLayer.removeChild(o),o=null)},s=function(){egret.Tween.get(o).to({alpha:0},500).call(r,this)};o.visible=!0,egret.Tween.get(o).to({y:o.y-120,alpha:1},800,egret.Ease.backOut).call(s,this)}function i(e,t,i,n,a,o){void 0===e&&(e=""),void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===n&&(n=24);var r=new egret.TextField;r.size=n,r.y=GameConfig.curHeight()/2,t?r.textColor=GameConfig.TextColors.red:r.textColor=GameConfig.TextColors.green,r.alpha=0,r.text=e,r.strokeColor=0,i?r.x=-r.width:r.x=GameConfig.curWidth(),r.stroke=2,r.bold=!0,r.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(r)||GameLayerManager.gameLayer().effectLayer.addChild(r),i?egret.Tween.get(r).to({x:GameConfig.curWidth()/2-r.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(r).to({x:GameConfig.curWidth()/2-r.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){i?egret.Tween.get(r).to({x:r.x+100},500):egret.Tween.get(r).to({x:r.x-100},500)},this,300),egret.setTimeout(function(){i?egret.Tween.get(r).to({x:GameConfig.curWidth()},300,egret.Ease.sineIn):egret.Tween.get(r).to({x:-r.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){GameLayerManager.gameLayer().effectLayer.contains(r)&&(GameLayerManager.gameLayer().effectLayer.removeChild(r),r=null)},this,1100)}function n(e,t,i,n,a,o){void 0===e&&(e=""),void 0===t&&(t=!1),void 0===i&&(i=24);var r=new egret.TextField;r.size=i,r.y=a,t?r.textColor=GameConfig.TextColors.red:r.textColor=GameConfig.TextColors.green,r.alpha=0,r.text=e,r.strokeColor=0,r.x=n,r.stroke=2,r.bold=!0,r.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(r)||GameLayerManager.gameLayer().effectLayer.addChild(r),r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.scaleX=0,r.scaleY=0;var s=function(){GameLayerManager.gameLayer().effectLayer.contains(r)&&(GameLayerManager.gameLayer().effectLayer.removeChild(r),r=null,null!=o&&o())};egret.Tween.get(r).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(r).to({alpha:0},500).call(s,this)},this,1e3)}function a(e,t,i,n,a){void 0===e&&(e=""),void 0===t&&(t=!1),void 0===i&&(i=24);var o=new egret.TextField;o.size=i,o.y=GameConfig.curHeight()/2,t?o.textColor=GameConfig.TextColors.red:o.textColor=GameConfig.TextColors.green,o.alpha=0,o.text=e,o.strokeColor=0,o.x=GameConfig.curWidth()/2,o.stroke=2,o.bold=!0,o.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(o)||GameLayerManager.gameLayer().effectLayer.addChild(o),o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,o.scaleX=4,o.scaleY=4;var r=function(){GameLayerManager.gameLayer().effectLayer.contains(o)&&(GameLayerManager.gameLayer().effectLayer.removeChild(o),o=null)};egret.Tween.get(o).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(o).to({alpha:0},500).call(r,this)},this,1e3)}e.showTipsDownToUp=t,e.showTipsLeftOrRight=i,e.showTipsFromCenter=n,e.showTipsBigToSmall=a}(TipsUtils||(TipsUtils={}));